{"version":3,"file":"ExportPanel-Ge-XKF4b.js","sources":["../../node_modules/lucide-react/dist/esm/icons/file-json.js","../../src/components/ExportPanel.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileJson = createLucideIcon(\"FileJson\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\n    \"path\",\n    { d: \"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1\", key: \"1oajmo\" }\n  ],\n  [\n    \"path\",\n    { d: \"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1\", key: \"mpwhp6\" }\n  ]\n]);\n\nexport { FileJson as default };\n//# sourceMappingURL=file-json.js.map\n","import React, { useState } from 'react';\nimport { User, TrainingRecord } from '../lib/supabase';\nimport { ACWRData } from '../lib/acwr';\nimport { TrendAnalysis } from '../lib/trendAnalysis';\nimport {\n  exportToCSV,\n  exportToJSON,\n  getDateRange,\n  ExportData\n} from '../lib/exportUtils';\nimport {\n  Download,\n  Calendar,\n  FileSpreadsheet,\n  FileJson,\n  X,\n  Clock\n} from 'lucide-react';\n\ninterface ExportPanelProps {\n  user: User;\n  trainingRecords: TrainingRecord[];\n  acwrData: ACWRData[];\n  trendAnalysis?: TrendAnalysis;\n  onClose: () => void;\n}\n\nexport function ExportPanel({ \n  user, \n  trainingRecords, \n  acwrData, \n  trendAnalysis, \n  onClose \n}: ExportPanelProps) {\n  const [selectedPeriod, setSelectedPeriod] = useState<'week' | 'month' | 'quarter' | 'custom'>('month');\n  const [customStartDate, setCustomStartDate] = useState('');\n  const [customEndDate, setCustomEndDate] = useState('');\n  const [isExporting, setIsExporting] = useState(false);\n\n  const handleExport = async (format: 'csv' | 'json') => {\n    setIsExporting(true);\n\n    try {\n      const dateRange = selectedPeriod === 'custom'\n        ? { start: customStartDate, end: customEndDate }\n        : getDateRange(selectedPeriod);\n\n      const filteredRecords = trainingRecords.filter(record =>\n        record.date >= dateRange.start && record.date <= dateRange.end\n      );\n\n      const filteredACWR = acwrData.filter(data =>\n        data.date >= dateRange.start && data.date <= dateRange.end\n      );\n\n      const exportData: ExportData = {\n        user,\n        trainingRecords: filteredRecords,\n        acwrData: filteredACWR,\n        trendAnalysis,\n        exportDate: new Date().toLocaleString('ja-JP'),\n        dateRange\n      };\n\n      switch (format) {\n        case 'csv':\n          exportToCSV(exportData);\n          break;\n        case 'json':\n          exportToJSON(exportData);\n          break;\n      }\n\n      setTimeout(() => {\n        setIsExporting(false);\n      }, 1000);\n\n    } catch (error) {\n      console.error('Export error:', error);\n      alert('„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');\n      setIsExporting(false);\n    }\n  };\n\n  const getPeriodLabel = () => {\n    switch (selectedPeriod) {\n      case 'week': return 'ÈÅéÂéª1ÈÄ±Èñì';\n      case 'month': return 'ÈÅéÂéª1„É∂Êúà';\n      case 'quarter': return 'ÈÅéÂéª3„É∂Êúà';\n      case 'custom': return '„Ç´„Çπ„Çø„É†ÊúüÈñì';\n      default: return 'ÈÅéÂéª1„É∂Êúà';\n    }\n  };\n\n  const getRecordCount = () => {\n    if (selectedPeriod === 'custom' && customStartDate && customEndDate) {\n      return trainingRecords.filter(record => \n        record.date >= customStartDate && record.date <= customEndDate\n      ).length;\n    } else if (selectedPeriod !== 'custom') {\n      const dateRange = getDateRange(selectedPeriod);\n      return trainingRecords.filter(record => \n        record.date >= dateRange.start && record.date <= dateRange.end\n      ).length;\n    }\n    return 0;\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-green-600 to-blue-600 text-white p-6 rounded-t-2xl\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Download className=\"w-8 h-8\" />\n              <div>\n                <h2 className=\"text-2xl font-bold\">„Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà</h2>\n                <p className=\"text-green-100\">{user.name}„Åï„Çì„ÅÆÁ∑¥Áøí„Éá„Éº„Çø</p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"bg-green-500 hover:bg-green-400 rounded-full p-2 transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* ÊúüÈñìÈÅ∏Êäû */}\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <h3 className=\"font-semibold text-gray-900 mb-4 flex items-center\">\n              <Calendar className=\"w-5 h-5 mr-2\" />\n              „Ç®„ÇØ„Çπ„Éù„Éº„ÉàÊúüÈñì\n            </h3>\n            \n            <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4\">\n              {[\n                { value: 'week', label: '1ÈÄ±Èñì' },\n                { value: 'month', label: '1„É∂Êúà' },\n                { value: 'quarter', label: '3„É∂Êúà' },\n                { value: 'custom', label: '„Ç´„Çπ„Çø„É†' }\n              ].map(period => (\n                <button\n                  key={period.value}\n                  onClick={() => setSelectedPeriod(period.value as any)}\n                  className={`p-3 rounded-lg text-sm font-medium transition-colors ${\n                    selectedPeriod === period.value\n                      ? 'bg-blue-600 text-white'\n                      : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  {period.label}\n                </button>\n              ))}\n            </div>\n\n            {selectedPeriod === 'custom' && (\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    ÈñãÂßãÊó•\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={customStartDate}\n                    onChange={(e) => setCustomStartDate(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    ÁµÇ‰∫ÜÊó•\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={customEndDate}\n                    onChange={(e) => setCustomEndDate(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n            )}\n\n            <div className=\"mt-4 p-3 bg-blue-50 rounded-lg\">\n              <div className=\"flex items-center text-sm text-blue-700\">\n                <Clock className=\"w-4 h-4 mr-2\" />\n                <span>\n                  {getPeriodLabel()}: {getRecordCount()}‰ª∂„ÅÆÁ∑¥ÁøíË®òÈå≤\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* „Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà */}\n          <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n            <h3 className=\"font-semibold text-gray-900 mb-4 flex items-center\">\n              <Download className=\"w-5 h-5 mr-2 text-green-600\" />\n              „Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà\n            </h3>\n            \n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n              <button\n                onClick={() => handleExport('csv')}\n                disabled={isExporting}\n                className=\"bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center space-x-2\"\n              >\n                <FileSpreadsheet className=\"w-4 h-4\" />\n                <span className=\"text-sm\">CSVÂΩ¢Âºè</span>\n              </button>\n              \n              <button\n                onClick={() => handleExport('json')}\n                disabled={isExporting}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center space-x-2\"\n              >\n                <FileJson className=\"w-4 h-4\" />\n                <span className=\"text-sm\">JSONÂΩ¢Âºè</span>\n              </button>\n            </div>\n            \n            <div className=\"mt-3 text-xs text-gray-600 space-y-1\">\n              <p>‚Ä¢ CSV: ExcelÁ≠â„ÅßÈñã„Åë„ÇãË°®ÂΩ¢Âºè„Éá„Éº„Çø</p>\n              <p>‚Ä¢ JSON: Ë©≥Á¥∞„Å™ÊßãÈÄ†Âåñ„Éá„Éº„ÇøÔºàÈñãÁô∫ËÄÖÂêë„ÅëÔºâ</p>\n            </div>\n          </div>\n\n          {/* ‰ΩøÁî®ÊñπÊ≥ï */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-medium text-blue-900 mb-2\">üí° „Ç®„ÇØ„Çπ„Éù„Éº„Éà„Éá„Éº„Çø„ÅÆÊ¥ªÁî®ÊñπÊ≥ï</h4>\n            <div className=\"text-sm text-blue-700 space-y-1\">\n              <p>‚Ä¢ <strong>CSV:</strong> ExcelÁ≠â„ÅßÈñã„ÅÑ„Å¶ÂàÜÊûê„ÄÅ‰ªñ„Ç∑„Çπ„ÉÜ„É†„Å∏„ÅÆ„Ç§„É≥„Éù„Éº„Éà</p>\n              <p>‚Ä¢ <strong>JSON:</strong> Ë©≥Á¥∞„Å™ÊßãÈÄ†Âåñ„Éá„Éº„Çø„ÄÅ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Éª„Éó„É≠„Ç∞„É©„É†Âà©Áî®„Å´ÊúÄÈÅ©</p>\n            </div>\n          </div>\n\n          {isExporting && (\n            <div className=\"text-center py-4\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"></div>\n              <p className=\"text-sm text-gray-600\">„Ç®„ÇØ„Çπ„Éù„Éº„Éà‰∏≠...</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["FileJson","createLucideIcon","d","key","ExportPanel","user","trainingRecords","acwrData","trendAnalysis","onClose","selectedPeriod","setSelectedPeriod","useState","customStartDate","setCustomStartDate","customEndDate","setCustomEndDate","isExporting","setIsExporting","handleExport","async","format","dateRange","start","end","getDateRange","filteredRecords","filter","record","date","filteredACWR","data","exportData","exportDate","Date","toLocaleString","exportToCSV","exportToJSON","setTimeout","error","console","alert","className","children","jsxs","jsx","Download","name","onClick","X","Calendar","value","label","map","period","type","onChange","e","target","Clock","getPeriodLabel","length","getRecordCount","disabled","FileSpreadsheet"],"mappings":"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","x_google_ignoreList":[0]}