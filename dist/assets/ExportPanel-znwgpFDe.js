import{z as e,j as s,D as a,X as t,E as r,G as l,I as n}from"./index-BXAoWvaK.js";import{r as c}from"./chart-vendor-DEPfNMx8.js";import{g as d,e as i,a as o}from"./exportUtils-CVEBC2Fl.js";import"./supabase-vendor-BgrwFlS9.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=e("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);function m({user:e,trainingRecords:m,acwrData:u,trendAnalysis:h,onClose:b}){const[g,j]=c.useState("month"),[p,v]=c.useState(""),[f,N]=c.useState(""),[y,w]=c.useState(!1),k=async s=>{w(!0);try{const a="custom"===g?{start:p,end:f}:d(g),t=m.filter(e=>e.date>=a.start&&e.date<=a.end),r=u.filter(e=>e.date>=a.start&&e.date<=a.end),l={user:e,trainingRecords:t,acwrData:r,trendAnalysis:h,exportDate:(new Date).toLocaleString("ja-JP"),dateRange:a};switch(s){case"csv":o(l);break;case"json":i(l)}setTimeout(()=>{w(!1)},1e3)}catch(a){console.error("Export error:",a),alert("ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚"),w(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 text-white p-6 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(a,{className:"w-8 h-8"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"}),s.jsxs("p",{className:"text-green-100",children:[e.name,"ã•ã‚“ã®ç·´ç¿’ãƒ‡ãƒ¼ã‚¿"]})]})]}),s.jsx("button",{onClick:b,className:"bg-green-500 hover:bg-green-400 rounded-full p-2 transition-colors",children:s.jsx(t,{className:"w-6 h-6"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(r,{className:"w-5 h-5 mr-2"}),"ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæœŸé–“"]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",children:[{value:"week",label:"1é€±é–“"},{value:"month",label:"1ãƒ¶æœˆ"},{value:"quarter",label:"3ãƒ¶æœˆ"},{value:"custom",label:"ã‚«ã‚¹ã‚¿ãƒ "}].map(e=>s.jsx("button",{onClick:()=>j(e.value),className:"p-3 rounded-lg text-sm font-medium transition-colors "+(g===e.value?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),children:e.label},e.value))}),"custom"===g&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"é–‹å§‹æ—¥"}),s.jsx("input",{type:"date",value:p,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"çµ‚äº†æ—¥"}),s.jsx("input",{type:"date",value:f,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center text-sm text-blue-700",children:[s.jsx(l,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{children:[(()=>{switch(g){case"week":return"éå»1é€±é–“";case"month":default:return"éå»1ãƒ¶æœˆ";case"quarter":return"éå»3ãƒ¶æœˆ";case"custom":return"ã‚«ã‚¹ã‚¿ãƒ æœŸé–“"}})(),": ",(()=>{if("custom"===g&&p&&f)return m.filter(e=>e.date>=p&&e.date<=f).length;if("custom"!==g){const e=d(g);return m.filter(s=>s.date>=e.start&&s.date<=e.end).length}return 0})(),"ä»¶ã®ç·´ç¿’è¨˜éŒ²"]})]})})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(a,{className:"w-5 h-5 mr-2 text-green-600"}),"ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>k("csv"),disabled:y,className:"bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:[s.jsx(n,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"CSVå½¢å¼"})]}),s.jsxs("button",{onClick:()=>k("json"),disabled:y,className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:[s.jsx(x,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"JSONå½¢å¼"})]})]}),s.jsxs("div",{className:"mt-3 text-xs text-gray-600 space-y-1",children:[s.jsx("p",{children:"â€¢ CSV: Excelç­‰ã§é–‹ã‘ã‚‹è¡¨å½¢å¼ãƒ‡ãƒ¼ã‚¿"}),s.jsx("p",{children:"â€¢ JSON: è©³ç´°ãªæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"ğŸ’¡ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ´»ç”¨æ–¹æ³•"}),s.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[s.jsxs("p",{children:["â€¢ ",s.jsx("strong",{children:"CSV:"})," Excelç­‰ã§é–‹ã„ã¦åˆ†æã€ä»–ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ"]}),s.jsxs("p",{children:["â€¢ ",s.jsx("strong",{children:"JSON:"})," è©³ç´°ãªæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒ åˆ©ç”¨ã«æœ€é©"]})]})]}),y&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¸­..."})]})]})]})})}export{m as ExportPanel};
//# sourceMappingURL=ExportPanel-znwgpFDe.js.map
