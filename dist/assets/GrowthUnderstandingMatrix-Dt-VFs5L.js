import{at as e,j as s}from"./index-BXAoWvaK.js";import{d as t,R as a,S as r,C as n,X as d,Y as i,b as l,T as o,e as x,g as m}from"./chart-vendor-DEPfNMx8.js";import"./supabase-vendor-BgrwFlS9.js";function c(e,s){if(!isFinite(e)||e<=0)return 6;if(!isFinite(s)||s<=0)return 6;var t,a,r;return 6+12*(t=e/s,a=0,r=1,Math.max(a,Math.min(r,t)))}const h=e=>{const{cx:t,cy:a}=e;return null==t||null==a?null:s.jsx("text",{x:t,y:a,textAnchor:"middle",dominantBaseline:"central",fontSize:18,children:"★"})};function u(e){const{points:u,teamAvg:j}=e,p=t.useMemo(()=>(null==u?void 0:u.length)?Math.max(...u.map(e=>"number"==typeof e.load?e.load:0),0):0,[u]),b=j?[{x:j.x,y:j.y,name:"チーム平均",load:j.load,rpe:null,duration_min:null}]:[];return s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-5",children:[s.jsx("div",{className:"flex items-end justify-between mb-3",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"成長度 × 理解度 × 負荷（sRPE）"}),s.jsx("div",{className:"text-xs text-gray-500",children:"点の大きさ＝load / ★＝チーム平均 / 50ラインで4象限"})]})}),s.jsx("div",{style:{width:"100%",height:420},children:s.jsx(a,{children:s.jsxs(r,{margin:{top:10,right:16,bottom:10,left:10},children:[s.jsx(n,{}),s.jsx(d,{type:"number",dataKey:"x",domain:[0,100],ticks:[0,25,50,75,100],label:{value:"理解度",position:"insideBottom",offset:-5}}),s.jsx(i,{type:"number",dataKey:"y",domain:[0,100],ticks:[0,25,50,75,100],label:{value:"成長度",angle:-90,position:"insideLeft"}}),s.jsx(l,{x:50,strokeDasharray:"4 4"}),s.jsx(l,{y:50,strokeDasharray:"4 4"}),s.jsx(o,{cursor:{strokeDasharray:"3 3"},content:({active:e,payload:t})=>{if(!e||!(null==t?void 0:t.length))return null;const a=t[0].payload;return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shadow",children:[s.jsx("div",{className:"font-semibold mb-1",children:a.name}),s.jsxs("div",{className:"text-sm",children:["理解度: ",Math.round(a.x)]}),s.jsxs("div",{className:"text-sm",children:["成長度: ",Math.round(a.y)]}),s.jsxs("div",{className:"text-sm",children:["負荷(load): ",Math.round(a.load)]}),"number"==typeof a.rpe&&s.jsxs("div",{className:"text-sm",children:["RPE: ",a.rpe]}),"number"==typeof a.duration_min&&s.jsxs("div",{className:"text-sm",children:["時間: ",a.duration_min,"分"]})]})}}),s.jsx(x,{}),s.jsx(m,{name:"選手",data:u,shape:e=>{const{cx:t,cy:a,payload:r}=e,n=c((null==r?void 0:r.load)??0,p);return s.jsx("circle",{cx:t,cy:a,r:n,fill:"#3b82f6",fillOpacity:.55,stroke:"#1d4ed8",strokeWidth:1})}}),s.jsx(m,{name:"チーム平均",data:b,shape:s.jsx(h,{})})]})})})]})}function j(t){const{date:a,athletes:r}=t,{points:n,teamAvg:d,loading:i,error:l}=e({date:a,athletes:r});return i?s.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 sm:p-5",children:s.jsx("div",{className:"flex items-center justify-center py-10",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})})}):l?s.jsxs("div",{className:"bg-white rounded-xl border border-red-200 p-4 sm:p-5 text-sm text-red-700",children:["GrowthUnderstandingMatrix：",l]}):s.jsx(u,{points:n,teamAvg:d})}export{u as GrowthUnderstandingMatrixChart,j as default};
//# sourceMappingURL=GrowthUnderstandingMatrix-Dt-VFs5L.js.map
