import{z as C,j as e,D as h,X as E,E as D,G as J,I as R}from"./index-C7IL5YWP.js";import{r as c}from"./chart-vendor-B8I3tXXj.js";import{g,e as P,a as V}from"./exportUtils-Bhmxw8Iv.js";import"./supabase-vendor-CRHRt2Ih.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=C("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);function I({user:x,trainingRecords:d,acwrData:b,trendAnalysis:p,onClose:j}){const[a,f]=c.useState("month"),[l,v]=c.useState(""),[n,N]=c.useState(""),[o,i]=c.useState(!1),m=async s=>{i(!0);try{const t=a==="custom"?{start:l,end:n}:g(a),S=d.filter(r=>r.date>=t.start&&r.date<=t.end),k=b.filter(r=>r.date>=t.start&&r.date<=t.end),u={user:x,trainingRecords:S,acwrData:k,trendAnalysis:p,exportDate:new Date().toLocaleString("ja-JP"),dateRange:t};switch(s){case"csv":V(u);break;case"json":P(u);break}setTimeout(()=>{i(!1)},1e3)}catch(t){console.error("Export error:",t),alert("ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚"),i(!1)}},y=()=>{switch(a){case"week":return"éå»1é€±é–“";case"month":return"éå»1ãƒ¶æœˆ";case"quarter":return"éå»3ãƒ¶æœˆ";case"custom":return"ã‚«ã‚¹ã‚¿ãƒ æœŸé–“";default:return"éå»1ãƒ¶æœˆ"}},w=()=>{if(a==="custom"&&l&&n)return d.filter(s=>s.date>=l&&s.date<=n).length;if(a!=="custom"){const s=g(a);return d.filter(t=>t.date>=s.start&&t.date<=s.end).length}return 0};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 text-white p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(h,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"}),e.jsxs("p",{className:"text-green-100",children:[x.name,"ã•ã‚“ã®ç·´ç¿’ãƒ‡ãƒ¼ã‚¿"]})]})]}),e.jsx("button",{onClick:j,className:"bg-green-500 hover:bg-green-400 rounded-full p-2 transition-colors",children:e.jsx(E,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(D,{className:"w-5 h-5 mr-2"}),"ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæœŸé–“"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",children:[{value:"week",label:"1é€±é–“"},{value:"month",label:"1ãƒ¶æœˆ"},{value:"quarter",label:"3ãƒ¶æœˆ"},{value:"custom",label:"ã‚«ã‚¹ã‚¿ãƒ "}].map(s=>e.jsx("button",{onClick:()=>f(s.value),className:`p-3 rounded-lg text-sm font-medium transition-colors ${a===s.value?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s.label},s.value))}),a==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"é–‹å§‹æ—¥"}),e.jsx("input",{type:"date",value:l,onChange:s=>v(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"çµ‚äº†æ—¥"}),e.jsx("input",{type:"date",value:n,onChange:s=>N(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center text-sm text-blue-700",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[y(),": ",w(),"ä»¶ã®ç·´ç¿’è¨˜éŒ²"]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(h,{className:"w-5 h-5 mr-2 text-green-600"}),"ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>m("csv"),disabled:o,className:"bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"CSVå½¢å¼"})]}),e.jsxs("button",{onClick:()=>m("json"),disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"JSONå½¢å¼"})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600 space-y-1",children:[e.jsx("p",{children:"â€¢ CSV: Excelç­‰ã§é–‹ã‘ã‚‹è¡¨å½¢å¼ãƒ‡ãƒ¼ã‚¿"}),e.jsx("p",{children:"â€¢ JSON: è©³ç´°ãªæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"ğŸ’¡ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ´»ç”¨æ–¹æ³•"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"CSV:"})," Excelç­‰ã§é–‹ã„ã¦åˆ†æã€ä»–ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"JSON:"})," è©³ç´°ãªæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒ—ãƒ­ã‚°ãƒ©ãƒ åˆ©ç”¨ã«æœ€é©"]})]})]}),o&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¸­..."})]})]})]})})}export{I as ExportPanel};
